# Docker

## Что это такое и зачем

* Решение для изоляции приложений на основе “виртуализации уровня ОС” (OS-level virtualization)
*  Изолированные приложения (процессы) используют ядро ОС-хозяина.
*   Позволяет экономить ресурсы
* В принципе, и не новое, и не единственное решение
*  Chroot
*  LXC
*  podman
* Но хорошо проработанное и организованное, а также открытое
*  Изоляция файлов (образ диска)
*  Изоляция процессов (используя namespaces)
*  Ограничение потребляемых ресурсов (cgroups)
*  Виртуальные сети
*  Hub - публичное хранилище образов
*  Стандарт для других решений, например Kubernetes

## Недостатки

* Плохая проработка безопасности
*  Нет традиционной для unix авторизации на основе u-g-o
*  Право использовать докер - право делать что-угодно с любыми образами и контейнерами. Фактически root на host.
* Hub начали курировать, есть “официальные” образы, которые просканированы на уязвимости и вредоносный код. 
*  С другими надо быть осторожнее (лучше всего пересобирать для себя)
* Альтернативы
*  podman

## Практика

Скачайте и запустите:

```bash 
sudo docker pull hello-world
sudo docker run hello-world
```

Этот контейнер выводит что-то и сразу останавливается.

Можно посмотреть его остатки:

```bash
sudo docker ps -a
```

Если снова запустите run, то он создаст новый.

Запустите контейнер снова, без создания нового:

```bash
docker start <cont_id>
```

Можно запустить с опцией автоматического удаления после останова

```bash
docker run -rm hello-world
```

Тьюториалы:

* [Full tutorial](4_docker_full_tutorial.md)
* [Dockerfile tutorial (сборка образа)](4_Dockerfile.md)


